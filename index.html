<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />

  <!-- ‚úÖ Mobile browser tuning -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="theme-color" content="#8B1E1E" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <meta name="description" content="Our Sampradhaya | Saravana - Temple Priest | Rituals, Pujas, Homams | Book online" />
  <title>Our Sampradhaya | Saravana - Temple Priest Services</title>
  <link rel="icon" href="data:," />

  <!-- Calendly embed script (official) -->
  <script src="https://assets.calendly.com/assets/external/widget.js" async></script>

  <style>
    :root{
      --saffron:#F4A300;
      --deep-saffron:#E68A00;
      --temple-red:#8B1E1E;

      --bg-main:#FFF6E5;
      --bg-soft:#FFF1D6;

      --panel-hero: rgba(255, 245, 228, 0.80);
      --panel-about: rgba(255, 239, 210, 0.72);
      --panel-services: rgba(255, 231, 186, 0.60);
      --panel-book: rgba(255, 241, 214, 0.68);
      --panel-contact: rgba(255, 237, 206, 0.70);

      --text-main:#3A2A1A;
      --text-muted:#6B4E2E;

      --border-soft: rgba(139,30,30,0.16);
      --shadow-soft: 0 12px 30px rgba(139,30,30,0.12);

      --radius:18px;
      --max:980px;

      /* iPhone notch safe areas */
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);
    }

    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background:
        radial-gradient(900px 520px at 12% 0%, rgba(244,163,0,0.25), transparent 60%),
        radial-gradient(760px 520px at 90% 22%, rgba(139,30,30,0.18), transparent 60%),
        linear-gradient(180deg, var(--bg-main), #FFE8B8);
      color:var(--text-main);
      line-height:1.6;
      overflow-x:hidden; /* ‚úÖ prevents horizontal scrolling */
      -webkit-text-size-adjust: 100%;
      touch-action: manipulation;
    }

    /* ‚úÖ Watermark */
    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      z-index:0;
      opacity:0.10;
      background-repeat:repeat;
      background-size:420px 420px;
      background-position:40px 20px;
      background-image:url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='420' height='420'>\
  <rect width='100%25' height='100%25' fill='none'/>\
  <g transform='translate(40,40) rotate(-18 170 170)'>\
    <text x='0' y='150' font-family='Georgia, serif' font-size='170' fill='%238B1E1E' opacity='0.25'>‡•ê</text>\
    <text x='10' y='210' font-family='Georgia, serif' font-size='44' fill='%23E68A00' opacity='0.35'>Om Shakti</text>\
  </g>\
</svg>");
    }

    a{ color:inherit; text-decoration:none; }
    .wrap{
      max-width:var(--max);
      margin:0 auto;
      padding: 18px;
      padding-left: calc(18px + var(--safe-left));
      padding-right: calc(18px + var(--safe-right));
      position:relative;
      z-index:1;
    }

    /* ‚úÖ Sticky Topbar with safe-area padding (iOS notch) */
    .topbar{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(255,241,214,0.98);
      border-bottom: 2px solid rgba(139,30,30,0.22);
      padding-top: var(--safe-top);
      /* iOS performance: reduce blur (blur can lag on old phones) */
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
    }
    .topbar .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px 18px;
      padding-left: calc(18px + var(--safe-left));
      padding-right: calc(18px + var(--safe-right));
      position:relative; /* for absolute nav in mobile */
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:950;
      letter-spacing:.2px;
      min-width: 220px;
      white-space:nowrap;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: var(--temple-red);
      box-shadow: 0 0 0 6px rgba(139,30,30,.12);
    }

    /* Nav */
    .nav{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }
    .pill{
      padding:8px 12px;
      border:1px solid rgba(139,30,30,.20);
      border-radius:999px;
      font-size:14px;
      background: rgba(255,255,255,.55);
    }
    .pill.cta{
      background: linear-gradient(90deg, var(--saffron), var(--deep-saffron));
      border:none;
      color:#4A2C0A;
      font-weight:950;
    }

    .lang-toggle{
      display:flex;
      border:1px solid rgba(139,30,30,.20);
      background: rgba(255,255,255,.55);
      border-radius:999px;
      overflow:hidden;
    }
    .lang-toggle button{
      border:none; background:transparent;
      padding:8px 10px;
      font-weight:950;
      cursor:pointer;
      font-size:13px;
      min-width:56px;
    }
    .lang-toggle button.active{
      background: rgba(244,163,0,.22);
    }

    /* Nav toggle (hamburger) */
    .nav-toggle{
      display:none;
      align-items:center;
      justify-content:center;
      background:transparent;
      border:1px solid rgba(139,30,30,.12);
      padding:8px 10px;
      border-radius:10px;
      cursor:pointer;
      font-size:18px;
      line-height:1;
      color:var(--temple-red);
    }

    section{ padding: 16px 0; scroll-margin-top: 90px; } /* ‚úÖ no header overlap */
    .panel{
      border:1px solid var(--border-soft);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      padding:16px;
    }
    .panel.hero{ background: var(--panel-hero); }
    .panel.about{ background: var(--panel-about); }
    .panel.services{ background: var(--panel-services); }
    .panel.book{ background: var(--panel-book); }
    .panel.contact{ background: var(--panel-contact); }

    .section-title{
      font-size:22px;
      margin:0 0 12px;
      color: var(--temple-red);
      letter-spacing:.2px;
    }

    .hero-grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
      align-items:stretch;
    }
    @media (max-width: 860px){
      .hero-grid{ grid-template-columns:1fr; }
    }

    h1{
      margin:0 0 8px;
      font-size: clamp(26px, 4.6vw, 44px);
      line-height:1.1;
      color:#2F2014;
    }
    .subtitle{ margin:0 0 14px; color: var(--text-muted); font-size:16px; }

    .badges{ display:flex; gap:10px; flex-wrap:wrap; margin-top:8px; }
    .badge{
      font-size:13px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(139,30,30,.18);
      background: rgba(255,255,255,.40);
    }

    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; }
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:8px;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(139,30,30,.20);
      background: rgba(255,255,255,.55);
      font-weight:950;
      min-width:150px;
      min-height:44px; /* ‚úÖ iOS tap target */
    }
    .btn.primary{
      background: linear-gradient(90deg, var(--saffron), var(--deep-saffron));
      border:none;
      color:#4A2C0A;
    }
    .btn.success{
      background: linear-gradient(90deg, #2E7D32, #66BB6A);
      border:none;
      color:#0F2A14;
    }

    /* ‚úÖ Mobile: buttons become full width */
    @media (max-width: 520px){
      .actions .btn{
        width:100%;
        min-width:0;
      }
      .nav .pill{ font-size:13px; padding:7px 10px; }
      .brand{ min-width: 0; }
    }

    .side{
      border:1px solid rgba(139,30,30,.16);
      border-radius: var(--radius);
      padding:14px;
      background: rgba(255,255,255,.42);
    }
    .kpi{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    .kpi .box{
      border:1px solid rgba(139,30,30,.14);
      border-radius:16px;
      padding:12px;
      background: rgba(255,255,255,.50);
    }
    .kpi .num{ font-size:22px; font-weight:950; }
    .kpi .label{ font-size:13px; color: var(--text-muted); }

    .about-flex{ display:flex; gap:14px; align-items:flex-start; }
    @media (max-width: 860px){ .about-flex{ flex-direction:column; } }
    .profile{
      width:120px; height:120px;
      border-radius:18px;
      border:1px solid rgba(139,30,30,.20);
      background: rgba(255,255,255,.55);
      object-fit:cover;
      box-shadow: 0 10px 24px rgba(139,30,30,.10);
    }
    .profile-note{ font-size:12px; color: var(--text-muted); margin-top:8px; }

    .grid3{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width: 860px){ .grid3{ grid-template-columns:1fr; } }

    /* Service cards */
    .service-card{
      position:relative;
      border-radius: var(--radius);
      overflow:hidden;
      border:1px solid rgba(139,30,30,.16);
      box-shadow: var(--shadow-soft);
      min-height: 220px;
      background-size: cover;
      background-position: center;
    }
    @media (max-width: 520px){
      .service-card{ min-height: 240px; } /* ‚úÖ a bit taller for mobile */
    }
    .service-card::before{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg,
        rgba(58,42,26,.18),
        rgba(58,42,26,.55) 55%,
        rgba(58,42,26,.72));
    }
    .service-content{
      position:absolute; inset:0;
      padding:14px;
      display:flex;
      flex-direction:column;
      justify-content:flex-end;
      gap:8px;
      color:#fff;
    }
    .service-title{
      margin:0;
      font-size:16px;
      line-height:1.2;
      font-weight:950;
      text-shadow: 0 2px 10px rgba(0,0,0,.25);
    }
    .service-desc{
      margin:0;
      font-size:13px;
      color: rgba(255,255,255,.92);
    }
    .service-meta{
      display:flex; gap:8px; flex-wrap:wrap;
      font-size:12px;
      color: rgba(255,255,255,.92);
    }
    .tag{
      padding:6px 9px;
      border-radius:999px;
      background: rgba(255,255,255,.18);
      border:1px solid rgba(255,255,255,.22);
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
    }
    .service-actions{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:6px;
    }
    .service-actions .btn{
      min-width:0;
      padding:10px 12px;
      border-radius:12px;
      background: rgba(255,255,255,.18);
      border:1px solid rgba(255,255,255,.22);
      color:#fff;
    }
    .service-actions .btn.primary{
      background: linear-gradient(90deg, rgba(244,163,0,.95), rgba(230,138,0,.95));
      border:none;
      color:#3A2A1A;
    }
    @media (max-width: 520px){
      .service-actions .btn{ width:100%; }
    }

    .other-services{
      grid-column: 1 / -1;
      border-radius: var(--radius);
      overflow:hidden;
      border:1px solid rgba(139,30,30,.16);
      box-shadow: var(--shadow-soft);
      background:
        radial-gradient(700px 240px at 10% 0%, rgba(244,163,0,.22), transparent 60%),
        radial-gradient(700px 240px at 90% 15%, rgba(139,30,30,.18), transparent 60%),
        rgba(255,255,255,.38);
      padding:16px;
    }
    .other-services h3{ margin:0 0 6px; font-size:16px; font-weight:950; }
    .other-services p{ margin:0 0 12px; color: var(--text-muted); font-size:14px; }
    .chips{ display:flex; gap:8px; flex-wrap:wrap; }
    .chip{
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(139,30,30,.16);
      background: rgba(255,255,255,.45);
      font-size:13px;
      font-weight:900;
    }

    .split{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    @media (max-width: 860px){ .split{ grid-template-columns:1fr; } }

    .box-card{
      border:1px solid rgba(139,30,30,.16);
      border-radius: var(--radius);
      background: rgba(255,255,255,.45);
      padding:16px;
    }

    .contact-list{ display:flex; flex-direction:column; gap:10px; }
    .contact-item{
      display:flex; gap:10px; align-items:flex-start;
      padding:12px;
      border-radius:16px;
      border:1px solid rgba(139,30,30,.16);
      background: rgba(255,255,255,.40);
      word-break: break-word;
    }
    .contact-item span{ color: var(--text-muted); font-size:14px; }

    /* ‚úÖ Calendly: better mobile height */
    .cal-wrap{
      border-radius: var(--radius);
      overflow:hidden;
      border:1px solid rgba(139,30,30,.18);
      background: rgba(255,255,255,.35);
      min-height: 740px;
    }
    @media (max-width: 520px){
      .cal-wrap{ min-height: 860px; }
      #calendlyInline{ height: 860px !important; }
    }

    .footer{
      padding: 18px 0 calc(40px + var(--safe-bottom));
      color: rgba(107,78,46,.95);
      font-size:13px;
      text-align:center;
    }

    /* ===== Responsive nav behavior ===== */
    @media (max-width: 860px) {
      .nav {
        display: none; /* hidden by default, toggled open via .open */
        position: absolute;
        top: calc(100% + 2px);
        left: 0;
        right: 0;
        background: rgba(255,241,214,0.98);
        padding: 12px calc(18px + var(--safe-left)) 12px calc(18px + var(--safe-right));
        flex-direction: column;
        gap: 8px;
        z-index: 60;
        border-bottom-left-radius: 12px;
        border-bottom-right-radius: 12px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.06);
      }
      .nav.open { display:flex; }
      .nav .pill { width:100%; text-align:left; }
      .nav .lang-toggle { align-self:flex-start; }
      .nav-toggle { display:inline-flex; }
      /* make CTA full width in dropdown to be easy to tap */
      .nav .pill.cta { width:100%; text-align:center; }
    }

    /* ‚úÖ Respect user settings */
    @media (prefers-reduced-motion: reduce){
      html{ scroll-behavior:auto; }
      *{ transition:none !important; animation:none !important; }
    }
  </style>
</head>

<body>
  <script>
    const SITE_NAME = "Our Sampradhaya";

    // EDIT THESE VALUES:
    const SARAVANA_PHONE   = "+65 9000 0000";
    const SARAVANA_EMAIL   = "saravana@example.com";
    const WHATSAPP_NUMBER  = "6590000000"; // digits only recommended
    const TEMPLE_OR_CITY   = "Singapore";
    const CALENDLY_URL     = "https://calendly.com/your-calendly/temple-services";
    const SARAVANA_PHOTO   = "saravana.jpg";

    /* ... existing JS (makeBg, SERVICES, I18N, etc.) ... */
  </script>

  <header class="topbar">
    <div class="row">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span>
        <span data-i18n="brand">Our Sampradhaya ‚Ä¢ Saravana</span>
      </div>

      <!-- Nav toggle for small screens -->
      <button class="nav-toggle" aria-expanded="false" aria-controls="primary-nav" aria-label="Toggle menu">‚ò∞</button>

      <!-- Primary navigation; id used by toggle control -->
      <nav id="primary-nav" class="nav" aria-label="Primary navigation">
        <a class="pill" href="#about" data-i18n="nav_about">About</a>
        <a class="pill" href="#services" data-i18n="nav_services">Services</a>
        <a class="pill" href="#book" data-i18n="nav_book">Book</a>
        <a class="pill" href="#contact" data-i18n="nav_contact">Contact</a>

        <div class="lang-toggle" aria-label="Language toggle">
          <button id="btnEN" type="button">EN</button>
          <button id="btnTA" type="button">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
        </div>

        <a class="pill cta" href="#book" data-i18n="nav_booknow">Book now</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section id="top">
      <div class="panel hero">
        <div class="hero-grid">
          <div>
            <h1 data-i18n="hero_title">Trusted rituals & guidance ‚Äî in person or online.</h1>
            <p class="subtitle" id="heroSubtitle"></p>

            <div class="badges">
              <span class="badge" data-i18n="badge1">‚úî Traditional Vedic rituals</span>
              <span class="badge" data-i18n="badge2">‚úî Clear preparation checklist</span>
              <span class="badge" data-i18n="badge3">‚úî English / Tamil / Telugu</span>
            </div>

            <div class="actions">
              <a class="btn primary" href="#book" data-i18n="btn_book">üìÖ Book a slot</a>
              <a class="btn success" id="waBtn" href="#" data-i18n="btn_whatsapp" aria-label="WhatsApp">üí¨ WhatsApp</a>
              <a class="btn" id="callBtn" href="#" data-i18n="btn_call" aria-label="Call">üìû Call</a>
            </div>

            <div class="subtitle" style="margin-top:10px; font-size:13px;" data-i18n="hero_mini">
              Prefer enquiry first? Use WhatsApp or book a short consultation in the calendar.
            </div>
          </div>

          <aside class="side">
            <div class="kpi">
              <div class="box">
                <div class="num" data-i18n="kpi1_num">40+</div>
                <div class="label" data-i18n="kpi1_label">Years experience</div>
              </div>
              <div class="box">
                <div class="num" data-i18n="kpi2_num">Online</div>
                <div class="label" data-i18n="kpi2_label">Puja & guidance</div>
              </div>
              <div class="box">
                <div class="num" data-i18n="kpi3_num">Home</div>
                <div class="label" data-i18n="kpi3_label">House rituals</div>
              </div>
              <div class="box">
                <div class="num" data-i18n="kpi4_num">Temple</div>
                <div class="label" data-i18n="kpi4_label">Special archana</div>
              </div>
            </div>

            <p class="subtitle" style="margin-top:10px; font-size:14px;" data-i18n="note">
              Book instantly via Calendly, or message for custom requirements, materials list, and pricing.
            </p>

            <button class="btn primary" style="width:100%; cursor:pointer" id="quickBookBtn" data-i18n="quickbook" aria-label="Quick Book">
              ‚ö° Quick Book (popup)
            </button>
          </aside>
        </div>
      </div>
    </section>

    <!-- rest of page unchanged (about, services, book, contact, footer) -->
    <!-- ... -->
  </main>

  <script>
    // Note: the full page's JS was present earlier. Below add only the new nav toggle behavior
    (function(){
      const navToggle = document.querySelector('.nav-toggle');
      const navEl = document.getElementById('primary-nav');
      const NAV_BREAKPOINT = 860; // must match CSS media query

      if (navToggle && navEl) {
        navToggle.addEventListener('click', () => {
          const open = navEl.classList.toggle('open');
          navToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
        });

        // Close nav when a link inside it is clicked (improves UX on mobile)
        navEl.querySelectorAll('a').forEach(a => {
          a.addEventListener('click', () => {
            if (navEl.classList.contains('open')) {
              navEl.classList.remove('open');
              navToggle.setAttribute('aria-expanded', 'false');
            }
          });
        });

        // Ensure menu is closed when resizing to large screens
        window.addEventListener('resize', () => {
          if (window.innerWidth > NAV_BREAKPOINT && navEl.classList.contains('open')) {
            navEl.classList.remove('open');
            navToggle.setAttribute('aria-expanded', 'false');
          }
        });

        // Optional: close the menu on Escape
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && navEl.classList.contains('open')) {
            navEl.classList.remove('open');
            navToggle.setAttribute('aria-expanded', 'false');
            navToggle.focus();
          }
        });
      }
    })();
  </script>
</body>
</html>
